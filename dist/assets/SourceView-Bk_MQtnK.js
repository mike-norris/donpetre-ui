import{l as N,u as G,r as a,j as e,B as o,T as r,p as u,P as L,D,G as b}from"./index-DR-c1u_z.js";import{s as j,J as E,G as T}from"./sources-pJugesbV.js";import{B as c}from"./Button-BbzPHUkG.js";import{A as g}from"./ArrowBack-B8bbD1Dr.js";import{S as R}from"./Sync-BJjPrdCq.js";import{E as K}from"./Edit-BU_M-goV.js";import{C as U}from"./Chip-DZwAFSoG.js";import{C as S,a as I}from"./CardContent-CNKmCIt5.js";import{G as s}from"./Grid-CxjzNcN3.js";import{f as h}from"./format-sbWH3_uq.js";const X=()=>{const{id:d}=N(),l=G(),[n,y]=a.useState(null),[w,C]=a.useState(!0),[m,v]=a.useState(!1),[p,k]=a.useState("");a.useEffect(()=>{(async()=>{var i,f;if(d)try{const x=await j.getKnowledgeSource(d);y(x)}catch(x){k(((f=(i=x.response)==null?void 0:i.data)==null?void 0:f.message)||"Failed to load knowledge source")}finally{C(!1)}})()},[d]);const A=async()=>{if(n){v(!0);try{await j.syncKnowledgeSource(n.id);const t=await j.getKnowledgeSource(n.id);y(t)}catch(t){console.error("Failed to sync source:",t)}finally{v(!1)}}},P=t=>{switch(t){case"GITHUB":return e.jsx(T,{});case"JIRA":return e.jsx(E,{});case"GITLAB":return e.jsx(b,{});default:return e.jsx(b,{})}},B=(t,i)=>{switch(i){case"GITHUB":return e.jsxs(s,{container:!0,spacing:2,children:[e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Owner/Organization"}),e.jsx(r,{variant:"body1",children:t.owner||"Not configured"})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Repository"}),e.jsx(r,{variant:"body1",children:t.repo||"All repositories"})]}),e.jsxs(s,{item:!0,xs:12,children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Token Status"}),e.jsx(r,{variant:"body1",children:t.token?"Configured":"Not configured"})]})]});case"JIRA":return e.jsxs(s,{container:!0,spacing:2,children:[e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"JIRA URL"}),e.jsx(r,{variant:"body1",children:t.url||"Not configured"})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Username"}),e.jsx(r,{variant:"body1",children:t.username||"Not configured"})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Project Key"}),e.jsx(r,{variant:"body1",children:t.projectKey||"Not configured"})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Token Status"}),e.jsx(r,{variant:"body1",children:t.token?"Configured":"Not configured"})]})]});case"GITLAB":return e.jsxs(s,{container:!0,spacing:2,children:[e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"GitLab URL"}),e.jsx(r,{variant:"body1",children:t.url||"Not configured"})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Project ID/Path"}),e.jsx(r,{variant:"body1",children:t.projectId||"Not configured"})]}),e.jsxs(s,{item:!0,xs:12,children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Token Status"}),e.jsx(r,{variant:"body1",children:t.token?"Configured":"Not configured"})]})]});default:return e.jsx(r,{children:"No configuration details available"})}};return w?e.jsx(o,{sx:{p:3},children:e.jsx(r,{children:"Loading source details..."})}):p||!n?e.jsxs(o,{sx:{p:3},children:[e.jsx(r,{color:"error",children:p||"Knowledge source not found"}),e.jsx(c,{startIcon:e.jsx(g,{}),onClick:()=>l(u.sources),sx:{mt:2},children:"Back to Sources"})]}):e.jsxs(o,{sx:{maxWidth:800,mx:"auto"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(c,{startIcon:e.jsx(g,{}),onClick:()=>l(u.sources),sx:{mr:2},children:"Back"}),e.jsx(o,{sx:{flexGrow:1}}),e.jsx(c,{startIcon:e.jsx(R,{}),variant:"outlined",onClick:A,disabled:m,sx:{mr:1},children:m?"Syncing...":"Sync Now"}),e.jsx(c,{startIcon:e.jsx(K,{}),variant:"contained",onClick:()=>l(u.sourcesEdit.replace(":id",n.id)),children:"Edit"})]}),e.jsxs(L,{sx:{p:3},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(o,{sx:{mr:2},children:P(n.type)}),e.jsxs(o,{children:[e.jsxs(r,{variant:"h4",component:"h1",children:[n.type," Source"]}),e.jsx(o,{sx:{mt:1},children:e.jsx(U,{label:n.isActive?"Active":"Inactive",color:n.isActive?"success":"default",size:"small"})})]})]}),e.jsx(D,{sx:{my:3}}),e.jsx(S,{sx:{mb:3},children:e.jsxs(I,{children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Configuration"}),B(n.configuration,n.type)]})}),e.jsx(S,{children:e.jsxs(I,{children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Sync Information"}),e.jsxs(s,{container:!0,spacing:2,children:[e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Created"}),e.jsx(r,{variant:"body1",children:h(new Date(n.createdAt),"PPP")})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Last Updated"}),e.jsx(r,{variant:"body1",children:h(new Date(n.updatedAt),"PPP")})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Last Sync"}),e.jsx(r,{variant:"body1",children:n.lastSync?h(new Date(n.lastSync),"PPp"):"Never synced"})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Status"}),e.jsx(r,{variant:"body1",children:n.isActive?"Enabled":"Disabled"})]})]})]})})]})]})};export{X as default};
//# sourceMappingURL=SourceView-Bk_MQtnK.js.map
