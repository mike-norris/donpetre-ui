import{c as b,j as e,l as B,u as S,r as n,B as s,T as r,p as d,P as p,D as x}from"./index-DR-c1u_z.js";import{k as C}from"./knowledge-DSTL9voN.js";import{B as o}from"./Button-BbzPHUkG.js";import{A as j}from"./ArrowBack-B8bbD1Dr.js";import{E as A}from"./Edit-BU_M-goV.js";import{C as g}from"./Chip-DZwAFSoG.js";import{L as P}from"./Link-nXlWw8Bx.js";import{f}from"./format-sbWH3_uq.js";const E=b(e.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew"),K=()=>{const{id:i}=B(),c=S(),[t,y]=n.useState(null),[w,I]=n.useState(!0),[m,k]=n.useState("");n.useEffect(()=>{(async()=>{var u,h;if(i)try{const l=await C.getKnowledgeItem(i);y(l)}catch(l){k(((h=(u=l.response)==null?void 0:u.data)==null?void 0:h.message)||"Failed to load knowledge item")}finally{I(!1)}})()},[i]);const v=a=>{switch(a){case"GITHUB":return"primary";case"JIRA":return"secondary";case"GITLAB":return"info";case"MANUAL":return"success";default:return"default"}};return w?e.jsx(s,{sx:{p:3},children:e.jsx(r,{children:"Loading..."})}):m||!t?e.jsxs(s,{sx:{p:3},children:[e.jsx(r,{color:"error",children:m||"Knowledge item not found"}),e.jsx(o,{startIcon:e.jsx(j,{}),onClick:()=>c(d.knowledge),sx:{mt:2},children:"Back to Knowledge Base"})]}):e.jsxs(s,{sx:{maxWidth:800,mx:"auto"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(o,{startIcon:e.jsx(j,{}),onClick:()=>c(d.knowledge),sx:{mr:2},children:"Back"}),e.jsx(s,{sx:{flexGrow:1}}),e.jsx(o,{startIcon:e.jsx(A,{}),variant:"outlined",onClick:()=>c(d.knowledgeEdit.replace(":id",t.id)),children:"Edit"})]}),e.jsxs(p,{sx:{p:3},children:[e.jsx(r,{variant:"h4",component:"h1",gutterBottom:!0,children:t.title}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:3,flexWrap:"wrap",gap:1},children:[e.jsx(g,{label:t.sourceType,color:v(t.sourceType),size:"small"}),t.tags.map(a=>e.jsx(g,{label:a,size:"small",variant:"outlined"},a))]}),t.summary&&e.jsxs(e.Fragment,{children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Summary"}),e.jsx(r,{variant:"body1",sx:{mb:3},color:"text.secondary",children:t.summary})]}),e.jsx(x,{sx:{my:3}}),e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Content"}),e.jsx(r,{variant:"body1",sx:{mb:3,lineHeight:1.7,whiteSpace:"pre-wrap"},children:t.content}),e.jsx(x,{sx:{my:3}}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(s,{children:[e.jsxs(r,{variant:"caption",color:"text.secondary",display:"block",children:["Created: ",f(new Date(t.createdAt),"PPP")]}),e.jsxs(r,{variant:"caption",color:"text.secondary",display:"block",children:["Updated: ",f(new Date(t.updatedAt),"PPP")]}),t.author&&e.jsxs(r,{variant:"caption",color:"text.secondary",display:"block",children:["Author: ",t.author.firstName," ",t.author.lastName," (",t.author.username,")"]})]}),t.sourceUrl&&e.jsx(o,{component:P,href:t.sourceUrl,target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(E,{}),variant:"outlined",size:"small",children:"View Source"})]}),Object.keys(t.metadata||{}).length>0&&e.jsxs(e.Fragment,{children:[e.jsx(x,{sx:{my:3}}),e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Metadata"}),e.jsx(p,{sx:{p:2,backgroundColor:"grey.50"},children:e.jsx("pre",{style:{margin:0,fontSize:"0.875rem"},children:JSON.stringify(t.metadata,null,2)})})]})]})]})};export{K as default};
//# sourceMappingURL=KnowledgeView-6wM5_FKI.js.map
