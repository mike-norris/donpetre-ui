import{g as V,a as $,r as x,b as K,_ as N,d as f,j as s,s as L,e as R,f as F,h as _,i as G,k as U,u as W,B as b,T as g,p as k,A,S as D}from"./index-DR-c1u_z.js";import{k as T}from"./knowledge-DSTL9voN.js";import{B as I}from"./Button-BbzPHUkG.js";import{T as H}from"./TextField-BWxT91tF.js";import{I as B,P as q}from"./Pagination-DLukQm_X.js";import{G as E}from"./Grid-CxjzNcN3.js";import{C as J,a as O}from"./CardContent-CNKmCIt5.js";import{C as P}from"./Chip-DZwAFSoG.js";import{f as Q}from"./format-sbWH3_uq.js";import{C as X}from"./CardActions-DN0C-ckv.js";function Y(e){return $("MuiFab",e)}const M=V("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),Z=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],ee=e=>{const{color:a,variant:t,classes:r,size:u}=e,l={root:["root",t,`size${F(u)}`,a==="inherit"?"colorInherit":a]},h=_(l,Y,r);return f({},r,h)},se=L(G,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>U(e)||e==="classes",overridesResolver:(e,a)=>{const{ownerState:t}=e;return[a.root,a[t.variant],a[`size${F(t.size)}`],t.color==="inherit"&&a.colorInherit,a[F(t.size)],a[t.color]]}})(({theme:e,ownerState:a})=>{var t,r;return f({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:(t=(r=e.palette).getContrastText)==null?void 0:t.call(r,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${M.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]}},a.size==="small"&&{width:40,height:40},a.size==="medium"&&{width:48,height:48},a.variant==="extended"&&{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},a.variant==="extended"&&a.size==="small"&&{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34},a.variant==="extended"&&a.size==="medium"&&{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40},a.color==="inherit"&&{color:"inherit"})},({theme:e,ownerState:a})=>f({},a.color!=="inherit"&&a.color!=="default"&&(e.vars||e).palette[a.color]!=null&&{color:(e.vars||e).palette[a.color].contrastText,backgroundColor:(e.vars||e).palette[a.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[a.color].main}}}),({theme:e})=>({[`&.${M.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}})),ae=x.forwardRef(function(a,t){const r=K({props:a,name:"MuiFab"}),{children:u,className:l,color:h="default",component:n="button",disabled:v=!1,disableFocusRipple:p=!1,focusVisibleClassName:j,size:C="large",variant:w="circular"}=r,z=N(r,Z),y=f({},r,{color:h,component:n,disabled:v,disableFocusRipple:p,size:C,variant:w}),m=ee(y);return s.jsx(se,f({className:R(m.root,l),component:n,disabled:v,focusRipple:!p,focusVisibleClassName:R(m.focusVisible,j),ownerState:y,ref:t},z,{classes:m,children:u}))}),ge=()=>{const e=W(),[a,t]=x.useState([]),[r,u]=x.useState(!0),[l,h]=x.useState(""),[n,v]=x.useState({page:0,size:12,totalPages:0,totalElements:0}),p=async(o=0,d="")=>{u(!0);try{let i;if(d){const c=await T.searchKnowledge({query:d,page:o,size:n.size});i={content:c.results.map(S=>S.knowledgeItem),totalElements:c.totalCount,totalPages:c.totalPages,size:c.size,number:c.page,first:c.page===0,last:c.page===c.totalPages-1}}else i=await T.getKnowledgeItems(o,n.size);t(i.content),v({page:i.number,size:i.size,totalPages:i.totalPages,totalElements:i.totalElements})}catch(i){console.error("Failed to fetch knowledge items:",i)}finally{u(!1)}};x.useEffect(()=>{p(0,l)},[]);const j=o=>{h(o.target.value)},C=()=>{p(0,l)},w=o=>{o.key==="Enter"&&C()},z=(o,d)=>{p(d-1,l)},y=o=>{e(k.knowledgeView.replace(":id",o))},m=o=>{switch(o){case"GITHUB":return"primary";case"JIRA":return"secondary";case"GITLAB":return"info";case"MANUAL":return"success";default:return"default"}};return s.jsxs(b,{sx:{flexGrow:1},children:[s.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[s.jsx(g,{variant:"h4",component:"h1",children:"Knowledge Base"}),s.jsx(I,{variant:"contained",startIcon:s.jsx(A,{}),onClick:()=>e(k.knowledgeCreate),children:"Create"})]}),s.jsx(b,{sx:{mb:3},children:s.jsx(H,{fullWidth:!0,placeholder:"Search knowledge items...",value:l,onChange:j,onKeyPress:w,InputProps:{startAdornment:s.jsx(B,{position:"start",children:s.jsx(D,{})}),endAdornment:s.jsx(B,{position:"end",children:s.jsx(I,{onClick:C,variant:"contained",size:"small",children:"Search"})})}})}),r?s.jsx(g,{children:"Loading..."}):s.jsxs(s.Fragment,{children:[s.jsxs(g,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[n.totalElements," items found"]}),s.jsx(E,{container:!0,spacing:3,children:a.map(o=>s.jsx(E,{item:!0,xs:12,sm:6,md:4,children:s.jsxs(J,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[s.jsxs(O,{sx:{flexGrow:1},children:[s.jsx(g,{variant:"h6",gutterBottom:!0,children:o.title}),s.jsx(g,{variant:"body2",color:"text.secondary",sx:{mb:2,minHeight:60},children:o.summary||`${o.content.substring(0,120)}...`}),s.jsxs(b,{sx:{mb:2},children:[s.jsx(P,{label:o.sourceType,color:m(o.sourceType),size:"small",sx:{mr:1}}),o.tags.slice(0,2).map(d=>s.jsx(P,{label:d,size:"small",variant:"outlined",sx:{mr:1}},d)),o.tags.length>2&&s.jsx(P,{label:`+${o.tags.length-2}`,size:"small",variant:"outlined"})]}),s.jsx(g,{variant:"caption",color:"text.secondary",children:Q(new Date(o.createdAt),"MMM dd, yyyy")})]}),s.jsx(X,{children:s.jsx(I,{size:"small",onClick:()=>y(o.id),children:"View"})})]})},o.id))}),n.totalPages>1&&s.jsx(b,{sx:{display:"flex",justifyContent:"center",mt:4},children:s.jsx(q,{count:n.totalPages,page:n.page+1,onChange:z,color:"primary"})})]}),s.jsx(ae,{color:"primary","aria-label":"add",sx:{position:"fixed",bottom:16,right:16},onClick:()=>e(k.knowledgeCreate),children:s.jsx(A,{})})]})};export{ge as default};
//# sourceMappingURL=KnowledgeList-BQI0rwK1.js.map
