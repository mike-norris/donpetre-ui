import{a as _,g as q,r as c,b as K,E as je,H as Se,_ as O,d as i,m as ke,J as we,K as Ie,j as o,s as N,e as H,h as J,N as ae,Q as ze,P as ne,i as Re,c as Q,f as ee,k as Ae,x as Te,u as Pe,R as Ee,B as k,T as j,S as $e,p as Me}from"./index-DR-c1u_z.js";import{k as Be}from"./knowledge-DSTL9voN.js";import{u as Ne,T as Fe}from"./TextField-BWxT91tF.js";import{I as ie,P as De}from"./Pagination-DLukQm_X.js";import{B as L}from"./Button-BbzPHUkG.js";import{S as Ge,F as ce}from"./FormControlLabel-C52aOkND.js";import{G as le}from"./Grid-CxjzNcN3.js";import{C as Le,a as We}from"./CardContent-CNKmCIt5.js";import{C as te}from"./Chip-DZwAFSoG.js";import{C as He}from"./CardActions-DN0C-ckv.js";import{f as Ue}from"./format-sbWH3_uq.js";function Ve(e){return _("MuiCollapse",e)}q("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const _e=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],qe=e=>{const{orientation:t,classes:n}=e,r={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return J(r,Ve,n)},Ke=N("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.state==="entered"&&t.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&t.hidden]}})(({theme:e,ownerState:t})=>i({height:0,overflow:"hidden",transition:e.transitions.create("height")},t.orientation==="horizontal"&&{height:"auto",width:0,transition:e.transitions.create("width")},t.state==="entered"&&i({height:"auto",overflow:"visible"},t.orientation==="horizontal"&&{width:"auto"}),t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&{visibility:"hidden"})),Oe=N("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>i({display:"flex",width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),Je=N("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(({ownerState:e})=>i({width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),ue=c.forwardRef(function(t,n){const r=K({props:t,name:"MuiCollapse"}),{addEndListener:l,children:u,className:f,collapsedSize:y="0px",component:S,easing:m,in:C,onEnter:d,onEntered:b,onEntering:w,onExit:$,onExited:v,onExiting:h,orientation:x="vertical",style:A,timeout:I=Se.standard,TransitionComponent:F=je}=r,D=O(r,_e),M=i({},r,{orientation:x,collapsedSize:y}),T=qe(M),s=ke(),p=we(),g=c.useRef(null),P=c.useRef(),z=typeof y=="number"?`${y}px`:y,E=x==="horizontal",U=E?"width":"height",X=c.useRef(null),me=Ie(n,X),G=a=>R=>{if(a){const B=X.current;R===void 0?a(B):a(B,R)}},oe=()=>g.current?g.current[E?"clientWidth":"clientHeight"]:0,he=G((a,R)=>{g.current&&E&&(g.current.style.position="absolute"),a.style[U]=z,d&&d(a,R)}),ge=G((a,R)=>{const B=oe();g.current&&E&&(g.current.style.position="");const{duration:V,easing:Y}=ae({style:A,timeout:I,easing:m},{mode:"enter"});if(I==="auto"){const re=s.transitions.getAutoHeightDuration(B);a.style.transitionDuration=`${re}ms`,P.current=re}else a.style.transitionDuration=typeof V=="string"?V:`${V}ms`;a.style[U]=`${B}px`,a.style.transitionTimingFunction=Y,w&&w(a,R)}),fe=G((a,R)=>{a.style[U]="auto",b&&b(a,R)}),ye=G(a=>{a.style[U]=`${oe()}px`,$&&$(a)}),Ce=G(v),be=G(a=>{const R=oe(),{duration:B,easing:V}=ae({style:A,timeout:I,easing:m},{mode:"exit"});if(I==="auto"){const Y=s.transitions.getAutoHeightDuration(R);a.style.transitionDuration=`${Y}ms`,P.current=Y}else a.style.transitionDuration=typeof B=="string"?B:`${B}ms`;a.style[U]=z,a.style.transitionTimingFunction=V,h&&h(a)}),ve=a=>{I==="auto"&&p.start(P.current||0,a),l&&l(X.current,a)};return o.jsx(F,i({in:C,onEnter:he,onEntered:fe,onEntering:ge,onExit:ye,onExited:Ce,onExiting:be,addEndListener:ve,nodeRef:X,timeout:I==="auto"?null:I},D,{children:(a,R)=>o.jsx(Ke,i({as:S,className:H(T.root,f,{entered:T.entered,exited:!C&&z==="0px"&&T.hidden}[a]),style:i({[E?"minWidth":"minHeight"]:z},A),ref:me},R,{ownerState:i({},M,{state:a}),children:o.jsx(Oe,{ownerState:i({},M,{state:a}),className:T.wrapper,ref:g,children:o.jsx(Je,{ownerState:i({},M,{state:a}),className:T.wrapperInner,children:u})})}))}))});ue.muiSupportAuto=!0;const xe=c.createContext({});function Qe(e){return _("MuiAccordion",e)}const Z=q("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),Xe=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],Ye=e=>{const{classes:t,square:n,expanded:r,disabled:l,disableGutters:u}=e;return J({root:["root",!n&&"rounded",r&&"expanded",l&&"disabled",!u&&"gutters"],region:["region"]},Qe,t)},Ze=N(ne,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Z.region}`]:t.region},t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${Z.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${Z.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e})=>({variants:[{props:t=>!t.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:t=>!t.disableGutters,style:{[`&.${Z.expanded}`]:{margin:"16px 0"}}}]})),eo=c.forwardRef(function(t,n){const r=K({props:t,name:"MuiAccordion"}),{children:l,className:u,defaultExpanded:f=!1,disabled:y=!1,disableGutters:S=!1,expanded:m,onChange:C,square:d=!1,slots:b={},slotProps:w={},TransitionComponent:$,TransitionProps:v}=r,h=O(r,Xe),[x,A]=Ne({controlled:m,default:f,name:"Accordion",state:"expanded"}),I=c.useCallback(E=>{A(!x),C&&C(E,!x)},[x,C,A]),[F,...D]=c.Children.toArray(l),M=c.useMemo(()=>({expanded:x,disabled:y,disableGutters:S,toggle:I}),[x,y,S,I]),T=i({},r,{square:d,disabled:y,disableGutters:S,expanded:x}),s=Ye(T),p=i({transition:$},b),g=i({transition:v},w),[P,z]=ze("transition",{elementType:ue,externalForwardedProps:{slots:p,slotProps:g},ownerState:T});return o.jsxs(Ze,i({className:H(s.root,u),ref:n,ownerState:T,square:d},h,{children:[o.jsx(xe.Provider,{value:M,children:F}),o.jsx(P,i({in:x,timeout:"auto"},z,{children:o.jsx("div",{"aria-labelledby":F.props.id,id:F.props["aria-controls"],role:"region",className:s.region,children:D})}))]}))});function oo(e){return _("MuiAccordionDetails",e)}q("MuiAccordionDetails",["root"]);const to=["className"],so=e=>{const{classes:t}=e;return J({root:["root"]},oo,t)},no=N("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),ro=c.forwardRef(function(t,n){const r=K({props:t,name:"MuiAccordionDetails"}),{className:l}=r,u=O(r,to),f=r,y=so(f);return o.jsx(no,i({className:H(y.root,l),ref:n,ownerState:f},u))});function ao(e){return _("MuiAccordionSummary",e)}const W=q("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),io=["children","className","expandIcon","focusVisibleClassName","onClick"],co=e=>{const{classes:t,expanded:n,disabled:r,disableGutters:l}=e;return J({root:["root",n&&"expanded",r&&"disabled",!l&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!l&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]},ao,t)},lo=N(Re,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${W.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${W.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${W.disabled})`]:{cursor:"pointer"},variants:[{props:n=>!n.disableGutters,style:{[`&.${W.expanded}`]:{minHeight:64}}}]}}),po=N("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:t=>!t.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${W.expanded}`]:{margin:"20px 0"}}}]})),uo=N("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${W.expanded}`]:{transform:"rotate(180deg)"}})),xo=c.forwardRef(function(t,n){const r=K({props:t,name:"MuiAccordionSummary"}),{children:l,className:u,expandIcon:f,focusVisibleClassName:y,onClick:S}=r,m=O(r,io),{disabled:C=!1,disableGutters:d,expanded:b,toggle:w}=c.useContext(xe),$=x=>{w&&w(x),S&&S(x)},v=i({},r,{expanded:b,disabled:C,disableGutters:d}),h=co(v);return o.jsxs(lo,i({focusRipple:!1,disableRipple:!0,disabled:C,component:"div","aria-expanded":b,className:H(h.root,u),focusVisibleClassName:H(h.focusVisible,y),onClick:$,ref:n,ownerState:v},m,{children:[o.jsx(po,{className:h.content,ownerState:v,children:l}),f&&o.jsx(uo,{className:h.expandIconWrapper,ownerState:v,children:f})]}))}),mo=Q(o.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),ho=Q(o.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),go=Q(o.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function fo(e){return _("MuiCheckbox",e)}const se=q("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),yo=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Co=e=>{const{classes:t,indeterminate:n,color:r,size:l}=e,u={root:["root",n&&"indeterminate",`color${ee(r)}`,`size${ee(l)}`]},f=J(u,fo,t);return i({},t,f)},bo=N(Ge,{shouldForwardProp:e=>Ae(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t[`size${ee(n.size)}`],n.color!=="default"&&t[`color${ee(n.color)}`]]}})(({theme:e,ownerState:t})=>i({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Te(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${se.checked}, &.${se.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${se.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),vo=o.jsx(ho,{}),jo=o.jsx(mo,{}),So=o.jsx(go,{}),de=c.forwardRef(function(t,n){var r,l;const u=K({props:t,name:"MuiCheckbox"}),{checkedIcon:f=vo,color:y="primary",icon:S=jo,indeterminate:m=!1,indeterminateIcon:C=So,inputProps:d,size:b="medium",className:w}=u,$=O(u,yo),v=m?C:S,h=m?C:f,x=i({},u,{color:y,indeterminate:m,size:b}),A=Co(x);return o.jsx(bo,i({type:"checkbox",inputProps:i({"data-indeterminate":m},d),icon:c.cloneElement(v,{fontSize:(r=v.props.fontSize)!=null?r:b}),checkedIcon:c.cloneElement(h,{fontSize:(l=h.props.fontSize)!=null?l:b}),ownerState:x,ref:n,className:H(A.root,w)},$,{classes:A}))}),ko=Q(o.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),pe=Q(o.jsx("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList"),No=()=>{const e=Pe(),[t,n]=Ee(),[r,l]=c.useState(t.get("q")||""),[u,f]=c.useState([]),[y,S]=c.useState(!1),[m,C]=c.useState({page:0,size:10,totalPages:0,totalCount:0}),[d,b]=c.useState({sourceTypes:[],tags:[]}),[w,$]=c.useState(!1),v=["GITHUB","JIRA","GITLAB","MANUAL"],h=async(s,p=0,g=d)=>{if(s.trim()){S(!0);try{const P={query:s.trim(),page:p,size:m.size,filters:{sourceType:g.sourceTypes.length>0?g.sourceTypes:void 0,tags:g.tags.length>0?g.tags:void 0}},z=await Be.searchKnowledge(P);f(z.results),C({page:z.page,size:z.size,totalPages:z.totalPages,totalCount:z.totalCount});const E=new URLSearchParams;E.set("q",s),p>0&&E.set("page",(p+1).toString()),n(E)}catch(P){console.error("Search failed:",P),f([])}finally{S(!1)}}};c.useEffect(()=>{const s=t.get("q"),p=parseInt(t.get("page")||"1")-1;s&&(l(s),h(s,p))},[]);const x=()=>{h(r,0,d)},A=s=>{s.key==="Enter"&&x()},I=(s,p)=>{h(r,p-1,d)},F=(s,p)=>{const g={...d,[s]:d[s].includes(p)?d[s].filter(P=>P!==p):[...d[s],p]};b(g)},D=()=>{h(r,0,d)},M=()=>{b({sourceTypes:[],tags:[]}),h(r,0,{sourceTypes:[],tags:[]})},T=s=>{switch(s){case"GITHUB":return"primary";case"JIRA":return"secondary";case"GITLAB":return"info";case"MANUAL":return"success";default:return"default"}};return o.jsxs(k,{children:[o.jsx(j,{variant:"h4",component:"h1",gutterBottom:!0,children:"Search Knowledge"}),o.jsx(k,{sx:{mb:3},children:o.jsx(Fe,{fullWidth:!0,placeholder:"Search knowledge items...",value:r,onChange:s=>l(s.target.value),onKeyPress:A,InputProps:{startAdornment:o.jsx(ie,{position:"start",children:o.jsx($e,{})}),endAdornment:o.jsx(ie,{position:"end",children:o.jsx(L,{onClick:x,variant:"contained",size:"small",children:"Search"})})}})}),o.jsxs(k,{sx:{display:"flex",gap:3},children:[o.jsx(k,{sx:{width:250,display:{xs:"none",md:"block"}},children:o.jsxs(ne,{sx:{p:2,position:"sticky",top:20},children:[o.jsxs(k,{sx:{display:"flex",alignItems:"center",mb:2},children:[o.jsx(pe,{sx:{mr:1}}),o.jsx(j,{variant:"h6",children:"Filters"})]}),o.jsx(j,{variant:"subtitle2",gutterBottom:!0,children:"Source Type"}),v.map(s=>o.jsx(ce,{control:o.jsx(de,{size:"small",checked:d.sourceTypes.includes(s),onChange:()=>F("sourceTypes",s)}),label:s,sx:{display:"block"}},s)),o.jsx(k,{sx:{mt:2,mb:2},children:o.jsx(L,{size:"small",onClick:D,variant:"outlined",fullWidth:!0,children:"Apply Filters"})}),o.jsx(L,{size:"small",onClick:M,variant:"text",fullWidth:!0,children:"Clear All"})]})}),o.jsx(k,{sx:{display:{xs:"block",md:"none"},width:"100%"},children:o.jsxs(eo,{expanded:w,onChange:()=>$(!w),children:[o.jsxs(xo,{expandIcon:o.jsx(ko,{}),children:[o.jsx(pe,{sx:{mr:1}}),o.jsx(j,{children:"Filters"})]}),o.jsxs(ro,{children:[o.jsx(j,{variant:"subtitle2",gutterBottom:!0,children:"Source Type"}),v.map(s=>o.jsx(ce,{control:o.jsx(de,{size:"small",checked:d.sourceTypes.includes(s),onChange:()=>F("sourceTypes",s)}),label:s,sx:{display:"block"}},s)),o.jsxs(k,{sx:{mt:2},children:[o.jsx(L,{size:"small",onClick:D,variant:"outlined",sx:{mr:1},children:"Apply"}),o.jsx(L,{size:"small",onClick:M,variant:"text",children:"Clear"})]})]})]})}),o.jsx(k,{sx:{flexGrow:1},children:y?o.jsx(j,{children:"Searching..."}):o.jsxs(o.Fragment,{children:[m.totalCount>0&&o.jsxs(j,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[m.totalCount," results found"]}),u.length===0&&r&&!y&&o.jsxs(ne,{sx:{p:3,textAlign:"center"},children:[o.jsx(j,{variant:"h6",color:"text.secondary",children:"No results found"}),o.jsx(j,{variant:"body2",color:"text.secondary",children:"Try adjusting your search terms or filters"})]}),o.jsx(le,{container:!0,spacing:2,children:u.map(s=>o.jsx(le,{item:!0,xs:12,children:o.jsxs(Le,{children:[o.jsxs(We,{children:[o.jsxs(k,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start",mb:1},children:[o.jsx(j,{variant:"h6",component:"h3",children:s.knowledgeItem.title}),o.jsx(te,{label:s.knowledgeItem.sourceType,color:T(s.knowledgeItem.sourceType),size:"small"})]}),o.jsx(j,{variant:"body2",color:"text.secondary",sx:{mb:2},children:s.knowledgeItem.summary||`${s.knowledgeItem.content.substring(0,200)}...`}),s.highlights.length>0&&o.jsxs(k,{sx:{mb:2},children:[o.jsx(j,{variant:"caption",color:"text.secondary",children:"Matches:"}),s.highlights.slice(0,2).map((p,g)=>o.jsx(j,{variant:"body2",sx:{backgroundColor:"yellow.100",p:1,borderRadius:1,mt:1,fontSize:"0.875rem"},dangerouslySetInnerHTML:{__html:p}},g))]}),o.jsxs(k,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:1},children:[s.knowledgeItem.tags.slice(0,3).map(p=>o.jsx(te,{label:p,size:"small",variant:"outlined"},p)),s.knowledgeItem.tags.length>3&&o.jsx(te,{label:`+${s.knowledgeItem.tags.length-3} more`,size:"small",variant:"outlined"})]}),o.jsxs(j,{variant:"caption",color:"text.secondary",children:["Score: ",(s.score*100).toFixed(1),"% | Created:"," ",Ue(new Date(s.knowledgeItem.createdAt),"MMM dd, yyyy")]})]}),o.jsx(He,{children:o.jsx(L,{size:"small",onClick:()=>e(Me.knowledgeView.replace(":id",s.knowledgeItem.id)),children:"View"})})]})},s.knowledgeItem.id))}),m.totalPages>1&&o.jsx(k,{sx:{display:"flex",justifyContent:"center",mt:4},children:o.jsx(De,{count:m.totalPages,page:m.page+1,onChange:I,color:"primary"})})]})})]})]})};export{No as default};
//# sourceMappingURL=SearchResults-CyYpi3V2.js.map
