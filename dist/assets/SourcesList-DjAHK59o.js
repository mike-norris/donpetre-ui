import{g as T,a as P,r as l,b as R,m as ce,P as Z,F as de,_ as $,d as c,n as pe,j as e,s as g,e as b,f as v,h as N,o as ue,q as xe,T as h,c as ee,u as me,B as C,p as B,A as V,I as he,t as ge,M as z,G as Y}from"./index-DR-c1u_z.js";import{s as H,J as fe,G as ye}from"./sources-pJugesbV.js";import{B as S}from"./Button-BbzPHUkG.js";import{C as J,a as X}from"./CardContent-CNKmCIt5.js";import{G as O}from"./Grid-CxjzNcN3.js";import{C as Ce}from"./Chip-DZwAFSoG.js";import{S as q}from"./Sync-BJjPrdCq.js";import{C as be}from"./CardActions-DN0C-ckv.js";import{E as ve}from"./Edit-BU_M-goV.js";import{f as Q}from"./format-sbWH3_uq.js";function je(o){return P("MuiDialog",o)}const K=T("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),oe=l.createContext({}),De=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],Se=g(xe,{name:"MuiDialog",slot:"Backdrop",overrides:(o,s)=>s.backdrop})({zIndex:-1}),ke=o=>{const{classes:s,scroll:n,maxWidth:r,fullWidth:d,fullScreen:i}=o,p={root:["root"],container:["container",`scroll${v(n)}`],paper:["paper",`paperScroll${v(n)}`,`paperWidth${v(String(r))}`,d&&"paperFullWidth",i&&"paperFullScreen"]};return N(p,je,s)},Me=g(ue,{name:"MuiDialog",slot:"Root",overridesResolver:(o,s)=>s.root})({"@media print":{position:"absolute !important"}}),we=g("div",{name:"MuiDialog",slot:"Container",overridesResolver:(o,s)=>{const{ownerState:n}=o;return[s.container,s[`scroll${v(n.scroll)}`]]}})(({ownerState:o})=>c({height:"100%","@media print":{height:"auto"},outline:0},o.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},o.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),We=g(Z,{name:"MuiDialog",slot:"Paper",overridesResolver:(o,s)=>{const{ownerState:n}=o;return[s.paper,s[`scrollPaper${v(n.scroll)}`],s[`paperWidth${v(String(n.maxWidth))}`],n.fullWidth&&s.paperFullWidth,n.fullScreen&&s.paperFullScreen]}})(({theme:o,ownerState:s})=>c({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},s.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},s.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!s.maxWidth&&{maxWidth:"calc(100% - 64px)"},s.maxWidth==="xs"&&{maxWidth:o.breakpoints.unit==="px"?Math.max(o.breakpoints.values.xs,444):`max(${o.breakpoints.values.xs}${o.breakpoints.unit}, 444px)`,[`&.${K.paperScrollBody}`]:{[o.breakpoints.down(Math.max(o.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},s.maxWidth&&s.maxWidth!=="xs"&&{maxWidth:`${o.breakpoints.values[s.maxWidth]}${o.breakpoints.unit}`,[`&.${K.paperScrollBody}`]:{[o.breakpoints.down(o.breakpoints.values[s.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},s.fullWidth&&{width:"calc(100% - 64px)"},s.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${K.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),Ie=l.forwardRef(function(s,n){const r=R({props:s,name:"MuiDialog"}),d=ce(),i={enter:d.transitions.duration.enteringScreen,exit:d.transitions.duration.leavingScreen},{"aria-describedby":p,"aria-labelledby":a,BackdropComponent:u,BackdropProps:x,children:k,className:M,disableEscapeKeyDown:w=!1,fullScreen:f=!1,fullWidth:F=!1,maxWidth:G="sm",onBackdropClick:W,onClick:I,onClose:j,open:D,PaperComponent:t=Z,PaperProps:m={},scroll:se="paper",TransitionComponent:te=de,transitionDuration:_=i,TransitionProps:ne}=r,re=$(r,De),A=c({},r,{disableEscapeKeyDown:w,fullScreen:f,fullWidth:F,maxWidth:G,scroll:se}),L=ke(A),E=l.useRef(),ae=y=>{E.current=y.target===y.currentTarget},ie=y=>{I&&I(y),E.current&&(E.current=null,W&&W(y),j&&j(y,"backdropClick"))},U=pe(a),le=l.useMemo(()=>({titleId:U}),[U]);return e.jsx(Me,c({className:b(L.root,M),closeAfterTransition:!0,components:{Backdrop:Se},componentsProps:{backdrop:c({transitionDuration:_,as:u},x)},disableEscapeKeyDown:w,onClose:j,open:D,ref:n,onClick:ie,ownerState:A},re,{children:e.jsx(te,c({appear:!0,in:D,timeout:_,role:"presentation"},ne,{children:e.jsx(we,{className:b(L.container),onMouseDown:ae,ownerState:A,children:e.jsx(We,c({as:t,elevation:24,role:"dialog","aria-describedby":p,"aria-labelledby":U},m,{className:b(L.paper,m.className),ownerState:A,children:e.jsx(oe.Provider,{value:le,children:k})}))})}))}))});function Ae(o){return P("MuiDialogActions",o)}T("MuiDialogActions",["root","spacing"]);const Be=["className","disableSpacing"],Te=o=>{const{classes:s,disableSpacing:n}=o;return N({root:["root",!n&&"spacing"]},Ae,s)},Pe=g("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(o,s)=>{const{ownerState:n}=o;return[s.root,!n.disableSpacing&&s.spacing]}})(({ownerState:o})=>c({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!o.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),Re=l.forwardRef(function(s,n){const r=R({props:s,name:"MuiDialogActions"}),{className:d,disableSpacing:i=!1}=r,p=$(r,Be),a=c({},r,{disableSpacing:i}),u=Te(a);return e.jsx(Pe,c({className:b(u.root,d),ownerState:a,ref:n},p))});function $e(o){return P("MuiDialogContent",o)}T("MuiDialogContent",["root","dividers"]);function Ne(o){return P("MuiDialogTitle",o)}const Fe=T("MuiDialogTitle",["root"]),Ge=["className","dividers"],Le=o=>{const{classes:s,dividers:n}=o;return N({root:["root",n&&"dividers"]},$e,s)},Ee=g("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(o,s)=>{const{ownerState:n}=o;return[s.root,n.dividers&&s.dividers]}})(({theme:o,ownerState:s})=>c({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},s.dividers?{padding:"16px 24px",borderTop:`1px solid ${(o.vars||o).palette.divider}`,borderBottom:`1px solid ${(o.vars||o).palette.divider}`}:{[`.${Fe.root} + &`]:{paddingTop:0}})),Ue=l.forwardRef(function(s,n){const r=R({props:s,name:"MuiDialogContent"}),{className:d,dividers:i=!1}=r,p=$(r,Ge),a=c({},r,{dividers:i}),u=Le(a);return e.jsx(Ee,c({className:b(u.root,d),ownerState:a,ref:n},p))}),ze=["className","id"],He=o=>{const{classes:s}=o;return N({root:["root"]},Ne,s)},Ke=g(h,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(o,s)=>s.root})({padding:"16px 24px",flex:"0 0 auto"}),_e=l.forwardRef(function(s,n){const r=R({props:s,name:"MuiDialogTitle"}),{className:d,id:i}=r,p=$(r,ze),a=r,u=He(a),{titleId:x=i}=l.useContext(oe);return e.jsx(Ke,c({component:"h2",className:b(u.root,d),ownerState:a,ref:n,variant:"h6",id:i??x},p))}),Ve=ee(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),Ye=ee(e.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert"),no=()=>{var D;const o=me(),[s,n]=l.useState([]),[r,d]=l.useState(!0),[i,p]=l.useState(null),[a,u]=l.useState({open:!1,source:null}),[x,k]=l.useState({element:null,sourceId:null}),M=async()=>{d(!0);try{const t=await H.getKnowledgeSources();n(t.content)}catch(t){console.error("Failed to fetch sources:",t)}finally{d(!1)}};l.useEffect(()=>{M()},[]);const w=(t,m)=>{k({element:t.currentTarget,sourceId:m})},f=()=>{k({element:null,sourceId:null})},F=async t=>{p(t);try{await H.syncKnowledgeSource(t),await M()}catch(m){console.error("Failed to sync source:",m)}finally{p(null)}f()},G=t=>{o(B.sourcesEdit.replace(":id",t)),f()},W=t=>{u({open:!0,source:t}),f()},I=async()=>{if(a.source)try{await H.deleteKnowledgeSource(a.source.id),n(s.filter(t=>t.id!==a.source.id)),u({open:!1,source:null})}catch(t){console.error("Failed to delete source:",t)}},j=t=>{switch(t){case"GITHUB":return e.jsx(ye,{});case"JIRA":return e.jsx(fe,{});case"GITLAB":return e.jsx(Y,{});default:return e.jsx(Y,{})}};return r?e.jsx(C,{sx:{p:3},children:e.jsx(h,{children:"Loading sources..."})}):e.jsxs(C,{sx:{flexGrow:1},children:[e.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(h,{variant:"h4",component:"h1",children:"Knowledge Sources"}),e.jsx(S,{variant:"contained",startIcon:e.jsx(V,{}),onClick:()=>o(B.sourcesCreate),children:"Add Source"})]}),s.length===0?e.jsx(J,{children:e.jsxs(X,{sx:{textAlign:"center",py:4},children:[e.jsx(h,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Knowledge Sources Configured"}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Connect your external systems like GitHub, JIRA, or GitLab to automatically ingest knowledge."}),e.jsx(S,{variant:"contained",startIcon:e.jsx(V,{}),onClick:()=>o(B.sourcesCreate),children:"Add Your First Source"})]})}):e.jsx(O,{container:!0,spacing:3,children:s.map(t=>e.jsx(O,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(J,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(X,{sx:{flexGrow:1},children:[e.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(C,{sx:{mr:2},children:j(t.type)}),e.jsxs(C,{sx:{flexGrow:1},children:[e.jsx(h,{variant:"h6",children:t.type}),e.jsx(Ce,{label:t.isActive?"Active":"Inactive",color:t.isActive?"success":"default",size:"small"})]}),e.jsx(he,{onClick:m=>w(m,t.id),size:"small",disabled:i===t.id,children:i===t.id?e.jsx(q,{}):e.jsx(Ye,{})})]}),e.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["Created: ",Q(new Date(t.createdAt),"MMM dd, yyyy")]}),t.lastSync&&e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Last Sync: ",Q(new Date(t.lastSync),"MMM dd, yyyy HH:mm")]}),!t.lastSync&&e.jsx(h,{variant:"body2",color:"warning.main",children:"Never synced"})]}),e.jsx(be,{children:e.jsx(S,{size:"small",onClick:()=>o(B.sourcesView.replace(":id",t.id)),children:"View Details"})})]})},t.id))}),e.jsxs(ge,{anchorEl:x.element,open:!!x.element,onClose:f,children:[e.jsxs(z,{onClick:()=>F(x.sourceId),disabled:i===x.sourceId,children:[e.jsx(q,{sx:{mr:1},fontSize:"small"}),"Sync Now"]}),e.jsxs(z,{onClick:()=>G(x.sourceId),children:[e.jsx(ve,{sx:{mr:1},fontSize:"small"}),"Edit"]}),e.jsxs(z,{onClick:()=>{const t=s.find(m=>m.id===x.sourceId);t&&W(t)},children:[e.jsx(Ve,{sx:{mr:1},fontSize:"small"}),"Delete"]})]}),e.jsxs(Ie,{open:a.open,onClose:()=>u({open:!1,source:null}),children:[e.jsx(_e,{children:"Delete Knowledge Source"}),e.jsx(Ue,{children:e.jsxs(h,{children:["Are you sure you want to delete this ",(D=a.source)==null?void 0:D.type," source? This action cannot be undone."]})}),e.jsxs(Re,{children:[e.jsx(S,{onClick:()=>u({open:!1,source:null}),children:"Cancel"}),e.jsx(S,{onClick:I,color:"error",variant:"contained",children:"Delete"})]})]})]})};export{no as default};
//# sourceMappingURL=SourcesList-DjAHK59o.js.map
