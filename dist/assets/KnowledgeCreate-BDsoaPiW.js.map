{"version":3,"file":"KnowledgeCreate-BDsoaPiW.js","sources":["../../src/pages/knowledge/KnowledgeCreate.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n  Box,\n  Typography,\n  Paper,\n  TextField,\n  Button,\n  Chip,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Alert,\n} from '@mui/material';\nimport { Save as SaveIcon, ArrowBack as ArrowBackIcon } from '@mui/icons-material';\nimport { useNavigate } from 'react-router-dom';\nimport { knowledgeService } from 'services/knowledge';\nimport paths from 'routes/paths';\n\nconst KnowledgeCreate = () => {\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [formData, setFormData] = useState({\n    title: '',\n    content: '',\n    summary: '',\n    sourceType: 'MANUAL' as const,\n    sourceUrl: '',\n    tags: [] as string[],\n  });\n  const [tagInput, setTagInput] = useState('');\n\n  const handleChange =\n    (field: string) => (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n      setFormData({\n        ...formData,\n        [field]: e.target.value,\n      });\n      if (error) setError('');\n    };\n\n  const handleAddTag = () => {\n    const trimmedTag = tagInput.trim();\n    if (trimmedTag && !formData.tags.includes(trimmedTag)) {\n      setFormData({\n        ...formData,\n        tags: [...formData.tags, trimmedTag],\n      });\n      setTagInput('');\n    }\n  };\n\n  const handleRemoveTag = (tagToRemove: string) => {\n    setFormData({\n      ...formData,\n      tags: formData.tags.filter((tag) => tag !== tagToRemove),\n    });\n  };\n\n  const handleTagInputKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      handleAddTag();\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      const newItem = await knowledgeService.createKnowledgeItem({\n        title: formData.title,\n        content: formData.content,\n        summary: formData.summary || undefined,\n        sourceType: formData.sourceType,\n        sourceUrl: formData.sourceUrl || undefined,\n        tags: formData.tags,\n        metadata: {},\n      });\n\n      navigate(paths.knowledgeView.replace(':id', newItem.id));\n    } catch (err: any) {\n      setError(err.response?.data?.message || 'Failed to create knowledge item');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Box sx={{ maxWidth: 800, mx: 'auto' }}>\n      <Box sx={{ display: 'flex', alignItems: 'center', mb: 3 }}>\n        <Button\n          startIcon={<ArrowBackIcon />}\n          onClick={() => navigate(paths.knowledge)}\n          sx={{ mr: 2 }}\n        >\n          Back\n        </Button>\n        <Typography variant=\"h4\" component=\"h1\">\n          Create Knowledge Item\n        </Typography>\n      </Box>\n\n      <Paper sx={{ p: 3 }}>\n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 3 }}>\n            {error}\n          </Alert>\n        )}\n\n        <Box component=\"form\" onSubmit={handleSubmit}>\n          <TextField\n            fullWidth\n            label=\"Title\"\n            required\n            value={formData.title}\n            onChange={handleChange('title')}\n            sx={{ mb: 3 }}\n          />\n\n          <TextField\n            fullWidth\n            label=\"Summary (optional)\"\n            multiline\n            rows={2}\n            value={formData.summary}\n            onChange={handleChange('summary')}\n            helperText=\"A brief summary of the knowledge item\"\n            sx={{ mb: 3 }}\n          />\n\n          <TextField\n            fullWidth\n            label=\"Content\"\n            required\n            multiline\n            rows={10}\n            value={formData.content}\n            onChange={handleChange('content')}\n            sx={{ mb: 3 }}\n          />\n\n          <Box sx={{ display: 'flex', gap: 2, mb: 3 }}>\n            <FormControl sx={{ minWidth: 200 }}>\n              <InputLabel>Source Type</InputLabel>\n              <Select\n                value={formData.sourceType}\n                label=\"Source Type\"\n                onChange={(e) => setFormData({ ...formData, sourceType: e.target.value as any })}\n              >\n                <MenuItem value=\"MANUAL\">Manual</MenuItem>\n                <MenuItem value=\"GITHUB\">GitHub</MenuItem>\n                <MenuItem value=\"JIRA\">JIRA</MenuItem>\n                <MenuItem value=\"GITLAB\">GitLab</MenuItem>\n              </Select>\n            </FormControl>\n\n            <TextField\n              fullWidth\n              label=\"Source URL (optional)\"\n              type=\"url\"\n              value={formData.sourceUrl}\n              onChange={handleChange('sourceUrl')}\n              helperText=\"Link to the original source\"\n            />\n          </Box>\n\n          <Box sx={{ mb: 3 }}>\n            <Typography variant=\"subtitle1\" gutterBottom>\n              Tags\n            </Typography>\n            <Box sx={{ display: 'flex', gap: 1, mb: 2, flexWrap: 'wrap' }}>\n              {formData.tags.map((tag) => (\n                <Chip key={tag} label={tag} onDelete={() => handleRemoveTag(tag)} size=\"small\" />\n              ))}\n            </Box>\n            <Box sx={{ display: 'flex', gap: 1 }}>\n              <TextField\n                size=\"small\"\n                placeholder=\"Add tag...\"\n                value={tagInput}\n                onChange={(e) => setTagInput(e.target.value)}\n                onKeyPress={handleTagInputKeyPress}\n              />\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                onClick={handleAddTag}\n                disabled={!tagInput.trim()}\n              >\n                Add\n              </Button>\n            </Box>\n          </Box>\n\n          <Box sx={{ display: 'flex', gap: 2 }}>\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              startIcon={<SaveIcon />}\n              disabled={loading || !formData.title || !formData.content}\n            >\n              {loading ? 'Creating...' : 'Create Knowledge Item'}\n            </Button>\n            <Button variant=\"outlined\" onClick={() => navigate(paths.knowledge)}>\n              Cancel\n            </Button>\n          </Box>\n        </Box>\n      </Paper>\n    </Box>\n  );\n};\n\nexport default KnowledgeCreate;\n"],"names":["KnowledgeCreate","navigate","useNavigate","loading","setLoading","useState","error","setError","formData","setFormData","tagInput","setTagInput","handleChange","field","e","handleAddTag","trimmedTag","handleRemoveTag","tagToRemove","tag","handleTagInputKeyPress","handleSubmit","newItem","knowledgeService","paths","err","_b","_a","jsxs","Box","jsx","Button","ArrowBackIcon","Typography","Paper","Alert","TextField","FormControl","InputLabel","Select","MenuItem","Chip","SaveIcon"],"mappings":"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"}