import{u as A,r as i,j as e,B as s,p as g,T,P as S,M as c}from"./index-DR-c1u_z.js";import{k}from"./knowledge-DSTL9voN.js";import{B as u}from"./Button-BbzPHUkG.js";import{A as B}from"./ArrowBack-B8bbD1Dr.js";import{A as U}from"./Alert-CCF4D8eA.js";import{T as l,F as L,I as W,S as K}from"./TextField-BWxT91tF.js";import{C as D}from"./Chip-DZwAFSoG.js";import{S as F}from"./Save-dCNWpKep.js";const H=()=>{const d=A(),[j,f]=i.useState(!1),[m,x]=i.useState(""),[t,n]=i.useState({title:"",content:"",summary:"",sourceType:"MANUAL",sourceUrl:"",tags:[]}),[p,y]=i.useState(""),o=a=>r=>{n({...t,[a]:r.target.value}),m&&x("")},v=()=>{const a=p.trim();a&&!t.tags.includes(a)&&(n({...t,tags:[...t.tags,a]}),y(""))},C=a=>{n({...t,tags:t.tags.filter(r=>r!==a)})},I=a=>{a.key==="Enter"&&(a.preventDefault(),v())},w=async a=>{var r,b;a.preventDefault(),f(!0),x("");try{const h=await k.createKnowledgeItem({title:t.title,content:t.content,summary:t.summary||void 0,sourceType:t.sourceType,sourceUrl:t.sourceUrl||void 0,tags:t.tags,metadata:{}});d(g.knowledgeView.replace(":id",h.id))}catch(h){x(((b=(r=h.response)==null?void 0:r.data)==null?void 0:b.message)||"Failed to create knowledge item")}finally{f(!1)}};return e.jsxs(s,{sx:{maxWidth:800,mx:"auto"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(u,{startIcon:e.jsx(B,{}),onClick:()=>d(g.knowledge),sx:{mr:2},children:"Back"}),e.jsx(T,{variant:"h4",component:"h1",children:"Create Knowledge Item"})]}),e.jsxs(S,{sx:{p:3},children:[m&&e.jsx(U,{severity:"error",sx:{mb:3},children:m}),e.jsxs(s,{component:"form",onSubmit:w,children:[e.jsx(l,{fullWidth:!0,label:"Title",required:!0,value:t.title,onChange:o("title"),sx:{mb:3}}),e.jsx(l,{fullWidth:!0,label:"Summary (optional)",multiline:!0,rows:2,value:t.summary,onChange:o("summary"),helperText:"A brief summary of the knowledge item",sx:{mb:3}}),e.jsx(l,{fullWidth:!0,label:"Content",required:!0,multiline:!0,rows:10,value:t.content,onChange:o("content"),sx:{mb:3}}),e.jsxs(s,{sx:{display:"flex",gap:2,mb:3},children:[e.jsxs(L,{sx:{minWidth:200},children:[e.jsx(W,{children:"Source Type"}),e.jsxs(K,{value:t.sourceType,label:"Source Type",onChange:a=>n({...t,sourceType:a.target.value}),children:[e.jsx(c,{value:"MANUAL",children:"Manual"}),e.jsx(c,{value:"GITHUB",children:"GitHub"}),e.jsx(c,{value:"JIRA",children:"JIRA"}),e.jsx(c,{value:"GITLAB",children:"GitLab"})]})]}),e.jsx(l,{fullWidth:!0,label:"Source URL (optional)",type:"url",value:t.sourceUrl,onChange:o("sourceUrl"),helperText:"Link to the original source"})]}),e.jsxs(s,{sx:{mb:3},children:[e.jsx(T,{variant:"subtitle1",gutterBottom:!0,children:"Tags"}),e.jsx(s,{sx:{display:"flex",gap:1,mb:2,flexWrap:"wrap"},children:t.tags.map(a=>e.jsx(D,{label:a,onDelete:()=>C(a),size:"small"},a))}),e.jsxs(s,{sx:{display:"flex",gap:1},children:[e.jsx(l,{size:"small",placeholder:"Add tag...",value:p,onChange:a=>y(a.target.value),onKeyPress:I}),e.jsx(u,{variant:"outlined",size:"small",onClick:v,disabled:!p.trim(),children:"Add"})]})]}),e.jsxs(s,{sx:{display:"flex",gap:2},children:[e.jsx(u,{type:"submit",variant:"contained",startIcon:e.jsx(F,{}),disabled:j||!t.title||!t.content,children:j?"Creating...":"Create Knowledge Item"}),e.jsx(u,{variant:"outlined",onClick:()=>d(g.knowledge),children:"Cancel"})]})]})]})]})};export{H as default};
//# sourceMappingURL=KnowledgeCreate-BDsoaPiW.js.map
